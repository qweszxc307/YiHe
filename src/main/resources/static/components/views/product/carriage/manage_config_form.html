<form id="manage-config-form" lay-filter="manage-config-form" class="layui-form model-form" style="padding-right:0px;height:100%">
    <div style=" height:80%;overflow: auto;padding-right:10px;padding-left:10px">
        <input name="id" type="hidden"/>
        <div class="layui-form-item">
            <label class="layui-form-label">名称</label>
            <div class="layui-input-block">
                <input name="carriage_config_name" placeholder="请输入策略名称" type="text" class="layui-input" lay-verify="required|number"/>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">满免价格(元)</label>
            <div class="layui-input-block">
                <input name="carriage_config_free_price" placeholder="请输入满免价格" type="text" class="layui-input" lay-verify="required|number"/>
            </div>
        </div>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>区域配置</legend>
        </fieldset>
        <div class="layui-row" style="margin-bottom: 10px;">
            <div class="layui-col-xs6">
                <div id="square_transfer1" class="demo-transfer layui-inline"></div>
            </div>
            <div class="layui-col-xs6">
                <div id="square_transfer2" class="demo-transfer layui-inline"></div>
            </div>
        </div>
        <div class="layui-row" style="margin-bottom: 10px;">
            <div class="layui-col-xs6">
                <div id="square_transfer3" class="demo-transfer layui-inline"></div>
            </div>
            <div class="layui-col-xs6">
                <div id="square_transfer4" class="demo-transfer layui-inline"></div>
            </div>
        </div>
    </div>
    <div class="layui-form-item model-form-footer" style="margin-top:10px;width:97%">
        <button class="layui-btn layui-btn-primary close" type="button">取消</button>
        <button class="layui-btn" lay-filter="manage-config-form-submit" lay-submit>保存</button>
    </div>
</form>
<script>
    layui.use(['layer','transfer', 'crown', 'table', 'form'], function () {
        var layer = layui.layer;
        var $ = layui.$
            ,transfer = layui.transfer
        var crown = layui.crown;
        var form = layui.form;
        var table = layui.table;
        var config = layui.config;
        $('#carriage-config-toolbar').vm({
            addShow: crown.hasPerm("carriage-config:add")
        });
        //回显运费策略数据
        var carriage = crown.getTempData('t_carriage');
        if(carriage){
            form.val('manage-config-form', carriage);
        }
        // 表单提交事件
        form.on('submit(manage-config-form-submit)', function (data) {
            layer.load(2);
            if (data.field.id) {
                crown.put('/carriage/' + data.field.id, {data: data.field}, function () {
                    layer.closeAll('loading');
                    layer.msg('修改成功', {icon: 1});
                    crown.finishPopupCenter();
                });
            } else {
                debugger;
                crown.post('/carriage', {data:data.field}, function () {
                    layer.closeAll('loading');
                    layer.msg('添加成功', {icon: 1});
                    crown.finishPopupCenter();
                });
            }
            return false;
        });
        // 渲染表格
        var carriageTable = table.render({
            elem: '#carriage-config-table',
            toolbar: '#carriage-config-toolbar',
            url: config.serverUrl + '/carriage',
            request: config.request,
            parseData: config.parseData,
            response: config.response,
            headers: {Authorization: config.getToken()},
            page:true,
            cols: [[
                { type: 'numbers', title: '' },
                {field: 'id', align: 'center', sort: true,title: 'id',hide:true},
                {field: 'orderNum', align: 'center', sort: true, title: '序号'},
                {field: 'name', align: 'center', sort: true, title: '运费策略模板名称'},
            ]]
        });
        var data = [
            {"value": "1", "title": "瓦罐汤"}
            ,{"value": "2", "title": "油酥饼"}
            ,{"value": "3", "title": "炸酱面"}
            ,{"value": "4", "title": "串串香", "disabled": true}
            ,{"value": "5", "title": "豆腐脑"}
            ,{"value": "6", "title": "驴打滚"}
            ,{"value": "7", "title": "北京烤鸭"}
            ,{"value": "8", "title": "烤冷面"}
            ,{"value": "9", "title": "毛血旺", "disabled": true}
            ,{"value": "10", "title": "肉夹馍"}
            ,{"value": "11", "title": "臊子面"}
            ,{"value": "12", "title": "凉皮"}
            ,{"value": "13", "title": "羊肉泡馍"}
            ,{"value": "14", "title": "冰糖葫芦", "disabled": true}
            ,{"value": "15", "title": "狼牙土豆"}
        ];
        //初始右侧数据
        transfer.render({
            elem: '#square_transfer1'
            ,data:data
            ,title: ['地区', '华东']
            ,showSearch: true
        })
        //初始右侧数据
        transfer.render({
            elem: '#square_transfer2'
            ,data:data
            ,title: ['地区', '华北']
            ,showSearch: true
        })
        //初始右侧数据
        transfer.render({
            elem: '#square_transfer3'
            ,data:data
            ,title: ['地区', '华南']
            ,showSearch: true
        })
        //初始右侧数据
        transfer.render({
            elem: '#square_transfer4'
            ,data:data
            ,title: ['地区', '华西']
            ,showSearch: true
        })
    })


</script>