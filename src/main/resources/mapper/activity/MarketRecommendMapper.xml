<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.crown.mapper.activity.MarketRecommendMapper">
    <select id="selectMarketRecommendPage" resultType="org.crown.model.activity.dto.MarketRecommendDTO">
    select mr.*,
        m.name memberName,
        p.name active_name,
        (select name from product where product.id = mr.send_pid) send_name,
        pr.price active_product_price,
        (select price from product_price  where product_price.pid = mr.send_pid and product_price.s_num = 1) send_price
            from market_recommend mr
            left join member m
            on m.id = mr.member_id
            left join product p
            on p.id = mr.active_pid
            left join product_price pr
            on pr.pid=p.id
            and pr.s_num = 1
    </select>
</mapper>
